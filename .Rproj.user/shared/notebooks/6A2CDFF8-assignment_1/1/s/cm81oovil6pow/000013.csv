"0","# ---- 3.2: Tract-level demographics (percentages only) ----"
"0",""
"0","# Calculate population percentages for each tract"
"0","tract_demo <- tract_raw %>%"
"0","  dplyr::mutate("
"0","    pct_white_nh = ifelse(total_popE > 0, 100 * white_nhE / total_popE, NA),"
"0","    pct_black_nh = ifelse(total_popE > 0, 100 * black_nhE / total_popE, NA),"
"0","    pct_hispanic = ifelse(total_popE > 0, 100 * hispanicE / total_popE, NA)"
"0","  ) %>%"
"0","  dplyr::mutate("
"0","    tract_label  = stringr::str_extract(NAME, ""^Census Tract\\s*[^,;]+""),"
"0","    county_label = NAME %>%"
"0","      stringr::str_extract(""[,;]\\s*[^,;]+\\s*County"") %>%"
"0","      stringr::str_replace_all(""^[,;]\\s*|\\s*County$"", """") %>%"
"0","      stringr::str_trim()"
"0","  )"
"0",""
"0","# Preview a few rows"
"0","knitr::kable("
"0","  tract_demo %>%"
"0","    dplyr::select("
"0","      GEOID, tract_label, county_label,"
"0","      total_popE, white_nhE, pct_white_nh,"
"0","      black_nhE, pct_black_nh,"
"0","      hispanicE, pct_hispanic"
"0","    ) %>%"
"0","    head(10),"
"0","  caption = ""Tract demographics with population percentages (first 10 rows)"","
"0","  digits = 1"
"0",")"
