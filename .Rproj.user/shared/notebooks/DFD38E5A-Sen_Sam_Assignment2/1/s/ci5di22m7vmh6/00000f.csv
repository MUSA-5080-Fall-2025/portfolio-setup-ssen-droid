"0","# Get demographic data from ACS"
"0",""
"0","# Get tract-level demographic data for Pennsylvania"
"0","# Get the elderly population data"
"0","# We need to sum multiple age categories to get total 65+ population"
"0","pa_demographics_corrected <- get_acs("
"0","  geography = ""tract"","
"0","  variables = c("
"0","    total_pop = ""B01003_001"",           # Total population"
"0","    median_income = ""B19013_001"",       # Median household income"
"0","    # Age 65-69"
"0","    age_65_69_male = ""B01001_020"",      # Male 65-69"
"0","    age_65_69_female = ""B01001_044"",    # Female 65-69"
"0","    # Age 70-74"
"0","    age_70_74_male = ""B01001_021"",      # Male 70-74"
"0","    age_70_74_female = ""B01001_045"",    # Female 70-74"
"0","    # Age 75-79"
"0","    age_75_79_male = ""B01001_022"",      # Male 75-79"
"0","    age_75_79_female = ""B01001_046"",    # Female 75-79"
"0","    # Age 80-84"
"0","    age_80_84_male = ""B01001_023"",      # Male 80-84"
"0","    age_80_84_female = ""B01001_047"",    # Female 80-84"
"0","    # Age 85+"
"0","    age_85_plus_male = ""B01001_024"",    # Male 85+"
"0","    age_85_plus_female = ""B01001_048""   # Female 85+"
"0","  ),"
"0","  state = ""PA"","
"0","  year = 2022,"
"0","  output = ""wide"""
"0",")"
"0",""
"0","# Calculate total population 65+"
"0","pa_demographics_corrected <- pa_demographics_corrected %>%"
"0","  mutate("
"0","    pop_65_plus_total = age_65_69_maleE + age_65_69_femaleE + "
"0","                        age_70_74_maleE + age_70_74_femaleE +"
"0","                        age_75_79_maleE + age_75_79_femaleE +"
"0","                        age_80_84_maleE + age_80_84_femaleE +"
"0","                        age_85_plus_maleE + age_85_plus_femaleE"
"0","  )"
"0",""
"0","# Join to tract boundaries"
"0","pa_tracts_with_data <- pa_tracts %>%"
"0","  left_join(pa_demographics_corrected, by = ""GEOID"")"
"0",""
